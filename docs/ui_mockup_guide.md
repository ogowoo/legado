# Legado Sigma 界面原型图

## 一、底部导航栏调整

### 方案A：新增AI中心（推荐）
```
┌─────────────────────────────────────────────────────────┐
│                      底部导航栏                          │
├──────────────┬──────────────┬──────────────┬────────────┤
│     📚       │      🔍      │      🤖      │     👤     │
│    书架      │     发现     │   AI助手     │    我的    │
└──────────────┴──────────────┴──────────────┴────────────┘
                              ↑
                         新增AI中心入口
```

### 方案B：保持现有，在"我的"突出AI
```
我的页面顶部：
┌─────────────────────────────────────────┐
│ 用户头像  用户名                        │
├─────────────────────────────────────────┤
│ 🤖 AI助手中心                           │
│ ┌──────────┬──────────┬──────────┐     │
│ │ AI修复   │ 规则生成 │ 规则优化 │     │
│ └──────────┴──────────┴──────────┘     │
├─────────────────────────────────────────┤
│ 书源管理     >                          │
│ 替换净化     >                          │
│ ...                                     │
└─────────────────────────────────────────┘
```

---

## 二、AI中心界面 (AiCenterFragment)

```
┌─────────────────────────────────────────┐
│ ← AI助手                    ⚙️ 设置     │  ← 标题栏
├─────────────────────────────────────────┤
│ ☑️ 启用AI功能                           │  ← 总开关
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 📖  AI内容修复                      │ │
│ │                                     │ │
│ │ 自动识别并修复乱码、缺字、广告等    │ │
│ │ 问题内容                           │ │
│ │                                     │ │
│ │ [       去使用       ]              │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 🔄  替换规则助手                    │ │
│ │                                     │ │
│ │ 智能生成替换规则，自动合并优化      │ │
│ │                                     │ │
│ │ [  生成规则  ]  [  优化规则  ]      │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ ✨  正则表达式生成                  │ │
│ │                                     │ │
│ │ 输入文本示例，AI自动生成正则        │ │
│ │                                     │ │
│ │ [       开始使用       ]            │ │
│ └─────────────────────────────────────┘ │
│                                         │
├─────────────────────────────────────────┤
│ 📊 最近使用                             │
│ • 修复《斗罗大陆》第32章... ✓          │
│ • 生成《凡人修仙传》规则... ✓          │
│ • 优化"广告过滤"规则组... ✓            │
└─────────────────────────────────────────┘
```

---

## 三、阅读界面长按菜单优化

### 当前菜单
```
┌─────────────────────────────────────────┐
│ 复制  分享  标记  搜索  词典  ...        │
└─────────────────────────────────────────┘
```

### 优化后菜单
```
┌─────────────────────────────────────────┐
│ 复制 │ 分享 │ 🤖 AI修复 │ 标记 │ 更多   │
└─────────────────────────────────────────┘
              ↓ 点击AI修复
┌─────────────────────────────────────────┐
│      🤖 AI内容修复助手                  │
├─────────────────────────────────────────┤
│ 📝 修复当前段落                         │
│ 📄 修复整章内容                         │
│ 🔄 生成替换规则                         │
│ 📋 查看修复历史                         │
└─────────────────────────────────────────┘
```

---

## 四、阅读界面工具栏优化

### 当前工具栏（8个图标，过于拥挤）
```
┌─────────────────────────────────────────┐
│目录│书签│朗读│界面│设置│替换│AI │更多  │
└─────────────────────────────────────────┘
```

### 优化后工具栏（6个图标+折叠）
```
┌─────────────────────────────────────────┐
│  目录  │  书签  │  朗读  │  样式  │ 🤖 │  ≡  │
└─────────────────────────────────────────┘
                            AI   更多
                            助手

点击"更多"(≡)展开：
├─ 🔄 替换净化
├─ 📖 翻页设置  
├─ 📍 进度跳转
└─ ⚙️ 阅读设置
```

---

## 五、AI修复对比对话框优化

### 当前对话框
```
┌─────────────────────────────────────────┐
│         AI内容修复对比                  │
├─────────────────────────────────────────┤
│ 原文：                                  │
│ ┌───────────────────────────────────┐   │
│ │ 本章未完，点击继续阅读。第3章...   │   │
│ └───────────────────────────────────┘   │
│ 修正后：                                │
│ ┌───────────────────────────────────┐   │
│ │ 第3章...                          │   │
│ └───────────────────────────────────┘   │
│ 差异：删除 12 字符                      │
├─────────────────────────────────────────┤
│ [  关闭  ] [生成规则] [应用修正]        │
└─────────────────────────────────────────┘
```

### 优化后对话框
```
┌─────────────────────────────────────────┐
│ ← AI修复对比                  ✕ 关闭    │
├─────────────────────────────────────────┤
│ 📊 统计：删除12字符 │ 置信度：98%        │
├─────────────────────────────────────────┤
│ 📝 原文                                 │
│ ┌───────────────────────────────────┐   │
│ │ 本章未完，点击继续阅读。第3章...   │   │
│ │        ^^^^^^^^^^^^^^^^           │   │
│ │        (红色删除标记)             │   │
│ └───────────────────────────────────┘   │
│                                         │
│ ✅ 修正后                               │
│ ┌───────────────────────────────────┐   │
│ │ 第3章...                          │   │
│ └───────────────────────────────────┘   │
├─────────────────────────────────────────┤
│                                         │
│ [   一键应用并生成规则   ]              │  ← 主操作
│                                         │
│ [仅应用修复]        [仅生成规则]        │  ← 次要操作
│                                         │
└─────────────────────────────────────────┘
```

---

## 六、替换规则管理界面优化

### 优化后布局
```
┌─────────────────────────────────────────┐
│ ← 替换净化            [+] [🔍] [⋮]      │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │ 💡 AI助手建议                       │ │  ← 智能提示
│ │ 检测到3条规则可以合并优化           │ │
│ │ [查看建议]                [✕ 忽略]  │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 🔍 搜索规则...                          │
├─────────────────────────────────────────┤
│ ● 全部  ○ 启用  ○ 禁用  ○ AI生成       │  ← 筛选
├─────────────────────────────────────────┤
│                                         │
│ ▼ [分组1]                        [⚙️]   │
│   ☑️ 过滤-广告                     [开关]│
│   ☐ 过滤-乱码                      [开关]│
│                                         │
│ ▼ [AI生成-本书规则] ⭐             [⚙️]   │  ← AI分组
│   ☑️ 本章未完提示                  [开关]│
│   ☑️ 网址链接过滤                  [开关]│
│      └─ 匹配: http://...                │
│                                         │
│ ▼ [AI生成-书源规则] ⭐             [⚙️]   │
│   ☑️ 通用广告过滤                  [开关]│
│                                         │
└─────────────────────────────────────────┘

长按规则弹出菜单：
├─ ✏️ 编辑
├─ 🗑️ 删除
├─ 📋 复制
├─ 🤖 AI优化此规则
└─ 📤 分享
```

---

## 七、替换规则编辑界面优化

### 优化后布局
```
┌─────────────────────────────────────────┐
│ 替换规则编辑                      [💾]  │
├─────────────────────────────────────────┤
│                                         │
│ 规则名称                                │
│ ┌───────────────────────────────────┐   │
│ │ 过滤-本章未完提示                 │   │
│ └───────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│ 匹配规则                        [🤖 AI] │  ← 醒目AI按钮
│ ┌─────────────────────────────────────┐ │
│ │ 本章[\\s\\S]{0,20}?(?:继续阅读)   │ │
│ └───────────────────────────────────┘   │
│ ☑️ 使用正则表达式                       │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 📝 常用正则快捷输入                  │ │
│ │ .*?  [\\s\\S]+  \\d+  [\\w\\W]      │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 替换为                                  │
│ ┌───────────────────────────────────┐   │
│ │ (留空表示删除)                    │   │
│ └───────────────────────────────────┘   │
├─────────────────────────────────────────┤
│ 分组                                    │
│ [AI生成-本书规则              ▼]        │
│                                         │
│ 作用范围                                │
│ [仅本书                      ▼]         │
│                                         │
│ ☑️ 作用于标题                           │
│ ☑️ 作用于正文                           │
│                                         │
├─────────────────────────────────────────┤
│ [📊 测试匹配效果]                       │  ← 新增测试功能
└─────────────────────────────────────────┘
```

---

## 八、AI正则生成对话框优化

### 优化后对话框
```
┌─────────────────────────────────────────┐
│ ← AI生成正则                    ✕ 关闭  │
├─────────────────────────────────────────┤
│ 输入要匹配的文本示例：                  │
│ ┌───────────────────────────────────┐   │
│ │ 本章未完，点击继续阅读            │   │
│ │ 本章未完，请点击下一页            │   │
│ │ 本章未完，查看完整内容            │   │
│ └───────────────────────────────────┘   │
│                                         │
│ 📝 快捷示例：                           │
│ ["本章未完"] ["点击继续"] ["广告"]    │
│                                         │
│ ┌───────────────────────────────────┐   │
│ │ 📋 从剪贴板粘贴                   │   │
│ └───────────────────────────────────┘   │
├─────────────────────────────────────────┤
│ [      🤖 生成正则表达式      ]         │
│                                         │
│    ⟳ 正在分析文本模式...                │
│                                         │
├─────────────────────────────────────────┤
│ 生成的正则表达式：                      │
│ ┌───────────────────────────────────┐   │
│ │ 本章[\\s\\S]{0,20}?(?:继续阅读)   │ │   │
│ └───────────────────────────────────┘   │
│                                         │
│ ☑️ 使用正则表达式                       │
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ 📊 匹配效果预览                      │ │
│ │ ✓ "本章未完，点击继续阅读"         │ │
│ │ ✓ "本章未完，请点击下一页"         │ │
│ │ ✗ "这是正文内容"                   │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ [取消]              [应用正则]          │
└─────────────────────────────────────────┘
```

---

## 九、AI设置界面 (新增)

```
┌─────────────────────────────────────────┐
│ ← AI助手设置                            │
├─────────────────────────────────────────┤
│ ☑️ 启用AI功能                           │
│    关闭后将禁用所有AI相关功能           │
├─────────────────────────────────────────┤
│ AI提供商                                │
│ [DashScope (通义千问)        ▼]         │
├─────────────────────────────────────────┤
│ API Key                                 │
│ [************************    ]  [👁️]    │
├─────────────────────────────────────────┤
│ 模型                                    │
│ [qwen-turbo                  ▼]         │
├─────────────────────────────────────────┤
│ ⚡ 高级设置                              │
├─────────────────────────────────────────┤
│ AI内容修复模式                          │
│ ○ 自动修复（直接应用，无需确认）        │
│ ● 长按预览（长按后显示对比）            │
│ ○ 关闭                                  │
├─────────────────────────────────────────┤
│ ☑️ 自动保存修复内容到缓存               │
│ ☑️ 修复后提示生成替换规则               │
│ ☑️ 允许使用移动数据网络                 │
├─────────────────────────────────────────┤
│ 规则生成设置                            │
│ ☑️ 默认使用通用正则规则                 │
│ ☑️ 自动生成规则名称                     │
│ ☑️ 自动应用规则到本书                   │
├─────────────────────────────────────────┤
│                                         │
│ [📊 查看使用统计]                       │
│ [🔄 重置AI设置]                         │
│                                         │
└─────────────────────────────────────────┘
```

---

## 十、界面元素总结

### 颜色规范
```
AI功能主色：#7C4DFF (紫罗兰)
AI功能次色：#B39DDB (浅紫)
AI成功色：#4CAF50 (绿色)
AI警告色：#FF9800 (橙色)
AI错误色：#F44336 (红色)
```

### 图标规范
```
AI中心：🤖 或机器人图标
AI修复：📝 或创可贴图标
AI生成：✨ 或魔法棒图标
AI优化：🔄 或循环箭头图标
正则生成：🔍 或代码图标
```

### 按钮规范
```
主操作按钮：填充色背景 + 白色文字
次要按钮：描边样式 + 主色文字
文字按钮：无背景 + 主色文字
危险操作：红色文字
```

---

*这些原型图展示了优化后的界面布局，可以作为开发参考。*
